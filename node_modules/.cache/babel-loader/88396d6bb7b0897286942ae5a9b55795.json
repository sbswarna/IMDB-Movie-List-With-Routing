{"ast":null,"code":"var _jsxFileName = \"F:\\\\React\\\\Homeworks\\\\imdb\\\\src\\\\components\\\\movies.component.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Table from \"./common/table.component\";\nimport Rating from \"./rating.component\";\nimport getMovies from \"../service/get-movies.service\";\nimport getGenres from \"../service/get-genres.service\";\nimport _ from \"lodash\";\nimport Pagination from \"./common/pagination.component\";\nimport Filter from \"./common/filtering.component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Movies = props => {\n  _s();\n\n  const [states, setStates] = useState({\n    movies: [],\n    sortColumn: {\n      path: \"id\",\n      order: \"asc\"\n    },\n    activePage: 1,\n    pageCount: 5,\n    genres: [],\n    selectedGenre: \"All Genres\"\n  });\n\n  function setMoviesAndGenres() {\n    const movies = getMovies();\n    const genres = [\"All Genres\", ...getGenres()];\n    setStates(prev => ({ ...prev,\n      movies,\n      genres\n    }));\n  }\n\n  useEffect(setMoviesAndGenres, []);\n\n  function handleToggleRating(movieRank) {\n    const movies = [states.movies];\n    console.log(movieRank);\n    const matchedMovie = movies.find(movie => movie.id === movieRank);\n    console.log(matchedMovie);\n    matchedMovie.your_rating = !matchedMovie.your_rating;\n    setStates(prev => ({ ...prev,\n      movies\n    }));\n  }\n\n  ;\n\n  function handleSort(sortColumn) {\n    setStates(prev => ({ ...prev,\n      sortColumn\n    }));\n  }\n\n  ;\n\n  function handleClickPage(activePage) {\n    setStates(prev => ({ ...prev,\n      activePage\n    }));\n  }\n\n  ;\n\n  function handleClickFilter(selectedGenre) {\n    setStates(prev => ({ ...prev,\n      selectedGenre\n    }));\n  }\n\n  ;\n\n  function paginateMovies(movies) {\n    const {\n      activePage,\n      pageCount\n    } = states;\n    const start = (activePage - 1) * pageCount;\n    const paginatedMovies = movies.slice(start, start + pageCount);\n    return paginatedMovies;\n  }\n\n  ;\n\n  function filterMovies() {\n    const {\n      movies,\n      selectedGenre\n    } = states;\n    const filteredMovies = movies.filter(movie => {\n      if (selectedGenre === \"All Genres\") return true;\n      if (movie.genres.includes(selectedGenre)) return true;\n      return false;\n    });\n    return filteredMovies;\n  }\n\n  ;\n\n  function sortMovies(movies) {\n    const {\n      sortColumn\n    } = states;\n\n    const sortedMovies = _.orderBy(movies, [sortColumn.path], [sortColumn.order]);\n\n    return sortedMovies;\n  }\n\n  ;\n  const filteredMovies = filterMovies();\n  const paginatedMovies = paginateMovies(filteredMovies);\n  const movies = sortMovies(paginatedMovies);\n  const columns = [{\n    label: \"Rank\",\n    path: \"id\",\n    sorting: true,\n    content: (movie, key) => /*#__PURE__*/_jsxDEV(\"td\", {\n      children: movie[key]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 38\n    }, this)\n  }, {\n    label: \"Title\",\n    path: \"title\",\n    sorting: true,\n    content: (movie, key) => /*#__PURE__*/_jsxDEV(\"td\", {\n      children: movie[key]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 38\n    }, this)\n  }, {\n    label: \"Poster\",\n    path: \"posterUrl\",\n    content: (movie, key) => /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: movie[key],\n        style: {\n          height: \"100px\",\n          width: \"auto\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }, this)\n  }, {\n    label: \"Your Rating\",\n    path: \"your_rating\",\n    content: (movie, key) => /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(Rating, {\n        isRated: movie[key],\n        rank: movie.id,\n        handleToggleRating: handleToggleRating\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }, this)\n  }, {\n    label: \"Action\",\n    path: \"action\",\n    content: (movie, key) => /*#__PURE__*/_jsxDEV(\"td\", {\n      children: movie[key]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 38\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(Filter, {\n          items: states.genres,\n          selectedGenre: states.selectedGenre,\n          onClickFilter: handleClickFilter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-8\",\n          children: [/*#__PURE__*/_jsxDEV(Table, {\n            items: movies,\n            columns: columns,\n            onSort: handleSort,\n            sortColumn: states.sortColumn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n            totalItems: filteredMovies.length,\n            pageCount: states.pageCount,\n            activePage: states.activePage,\n            onClickPage: handleClickPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Movies, \"Fb4kyEg2/hPVOsNcx0+M7N74DE0=\");\n\n_c = Movies;\nexport default Movies;\n\nvar _c;\n\n$RefreshReg$(_c, \"Movies\");","map":{"version":3,"sources":["F:/React/Homeworks/imdb/src/components/movies.component.js"],"names":["React","useEffect","useState","Table","Rating","getMovies","getGenres","_","Pagination","Filter","Movies","props","states","setStates","movies","sortColumn","path","order","activePage","pageCount","genres","selectedGenre","setMoviesAndGenres","prev","handleToggleRating","movieRank","console","log","matchedMovie","find","movie","id","your_rating","handleSort","handleClickPage","handleClickFilter","paginateMovies","start","paginatedMovies","slice","filterMovies","filteredMovies","filter","includes","sortMovies","sortedMovies","orderBy","columns","label","sorting","content","key","height","width","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Table from \"./common/table.component\";\r\nimport Rating from \"./rating.component\";\r\nimport getMovies from \"../service/get-movies.service\";\r\nimport getGenres from \"../service/get-genres.service\";\r\nimport _ from \"lodash\";\r\nimport Pagination from \"./common/pagination.component\";\r\nimport Filter from \"./common/filtering.component\";\r\n\r\nconst Movies = (props) => {\r\n    const [states, setStates] = useState({\r\n        movies: [],\r\n        sortColumn: { path: \"id\", order: \"asc\" },\r\n        activePage: 1,\r\n        pageCount: 5,\r\n        genres: [],\r\n        selectedGenre: \"All Genres\",\r\n    });\r\n\r\n    function setMoviesAndGenres() {\r\n        const movies = getMovies();\r\n        const genres = [\"All Genres\", ...getGenres()];\r\n        setStates((prev) => ({ ...prev, movies, genres }));\r\n    }\r\n\r\n    useEffect(setMoviesAndGenres, []);\r\n\r\n    function handleToggleRating(movieRank) {\r\n        const movies = [states.movies];\r\n        console.log(movieRank);\r\n        const matchedMovie = movies.find((movie) => movie.id === movieRank);\r\n        console.log(matchedMovie);\r\n        matchedMovie.your_rating = !matchedMovie.your_rating;\r\n        setStates((prev) => ({ ...prev, movies }));\r\n    };\r\n\r\n    function handleSort(sortColumn) {\r\n        setStates((prev) => ({ ...prev, sortColumn }));\r\n    };\r\n\r\n    function handleClickPage(activePage) {\r\n        setStates((prev) => ({ ...prev, activePage }));\r\n    };\r\n\r\n    function handleClickFilter(selectedGenre) {\r\n        setStates((prev) => ({ ...prev, selectedGenre }));\r\n    };\r\n\r\n    function paginateMovies(movies) {\r\n        const { activePage, pageCount } = states;\r\n        const start = (activePage - 1) * pageCount;\r\n        const paginatedMovies = movies.slice(start, start + pageCount);\r\n        return paginatedMovies;\r\n    };\r\n\r\n    function filterMovies() {\r\n        const { movies, selectedGenre } = states;\r\n        const filteredMovies = movies.filter((movie) => {\r\n            if (selectedGenre === \"All Genres\") return true;\r\n\r\n            if (movie.genres.includes(selectedGenre)) return true;\r\n            return false;\r\n        });\r\n        return filteredMovies;\r\n    };\r\n\r\n    function sortMovies(movies) {\r\n        const { sortColumn } = states;\r\n        const sortedMovies = _.orderBy(\r\n            movies,\r\n            [sortColumn.path],\r\n            [sortColumn.order]\r\n        );\r\n        return sortedMovies;\r\n    };\r\n\r\n    const filteredMovies = filterMovies();\r\n    const paginatedMovies = paginateMovies(filteredMovies);\r\n    const movies = sortMovies(paginatedMovies);\r\n    const columns = [\r\n        {\r\n            label: \"Rank\",\r\n            path: \"id\",\r\n            sorting: true,\r\n            content: (movie, key) => <td>{movie[key]}</td>,\r\n        },\r\n        {\r\n            label: \"Title\",\r\n            path: \"title\",\r\n            sorting: true,\r\n            content: (movie, key) => <td>{movie[key]}</td>,\r\n        },\r\n        {\r\n            label: \"Poster\",\r\n            path: \"posterUrl\",\r\n            content: (movie, key) => (\r\n                <td>\r\n                    <img\r\n                        src={movie[key]}\r\n                        style={{ height: \"100px\", width: \"auto\" }}\r\n                    />\r\n                </td>\r\n            ),\r\n        },\r\n        {\r\n            label: \"Your Rating\",\r\n            path: \"your_rating\",\r\n            content: (movie, key) => (\r\n                <td>\r\n                    <Rating\r\n                        isRated={movie[key]}\r\n                        rank={movie.id}\r\n                        handleToggleRating={handleToggleRating}\r\n                    />\r\n                </td>\r\n            ),\r\n        },\r\n        {\r\n            label: \"Action\",\r\n            path: \"action\",\r\n            content: (movie, key) => <td>{movie[key]}</td>,\r\n        },\r\n    ];\r\n    return (\r\n        <>\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <Filter\r\n                        items={states.genres}\r\n                        selectedGenre={states.selectedGenre}\r\n                        onClickFilter={handleClickFilter}\r\n                    />\r\n                    <div className=\"col-lg-8\">\r\n                        <Table\r\n                            items={movies}\r\n                            columns={columns}\r\n                            onSort={handleSort}\r\n                            sortColumn={states.sortColumn}\r\n                        />\r\n                        <Pagination\r\n                            totalItems={filteredMovies.length}\r\n                            pageCount={states.pageCount}\r\n                            activePage={states.activePage}\r\n                            onClickPage={handleClickPage}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Movies;\r\n"]},"metadata":{},"sourceType":"module"}